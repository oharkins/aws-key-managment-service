<mat-card>
    <mat-card-header>
        <mat-card-title>Service Details</mat-card-title>
        <mat-card-subtitle>Service Id: {{ ServiceDetails.serviceId }}</mat-card-subtitle>
    </mat-card-header>
    <ng-container *ngIf="(keys | async) as keys">
    <mat-card-content>
        <mat-grid-list cols="3" rowHeight="4:1" style="margin-top: 1em;">
            <mat-grid-tile>
                <div class="key-value-pair text-inside-grid">
                    <div class="key">Description:</div>
                    <div class="value">{{ ServiceDetails.name ?? '-'}}</div>
                </div>
            </mat-grid-tile>
            <mat-grid-tile><div class="key-value-pair text-inside-grid">
                <div class="key">Status:</div>
                <div class="value">{{ ServiceDetails.status }}</div>
            </div></mat-grid-tile>
            <mat-grid-tile><div class="key-value-pair text-inside-grid">
                <div class="key">Max Key Age:</div>
                <div class="value">{{ ServiceDetails.maxKeyAgeDays }} Days</div>
            </div></mat-grid-tile>
        </mat-grid-list>
        <ng-container *ngFor="let key of keys; index as i">
        <mat-card class="keys-card mat-elevation-z5">
                <mat-card-title style="font-size: 1.125em;">
                    Key: {{$any(key)?.keyId}} <button mat-stroked-button style="float: right;" (click)="onRotateOrDeleteKey(i, key.keyId)">{{i == 0 ? 'Role Key' : 'Delete Key'}}</button>
                </mat-card-title>
            <mat-card-content>
                <mat-grid-list cols="2" rowHeight="4:1" style="margin-top: 2em;">
                    <mat-grid-tile>
                        <div class="key-value-pair text-inside-grid">
                            <div class="key">Key:</div>
                            <div class="value">{{$any(key)?.key}}</div>
                        </div>
                    </mat-grid-tile>
                    <mat-grid-tile><div class="key-value-pair text-inside-grid">
                        <div class="key">Status:</div>
                        <div class="value">{{$any(key)['status']}}</div>
                    </div></mat-grid-tile>
                    <mat-grid-tile><div class="key-value-pair text-inside-grid">
                        <div class="key">Expiration Date:</div>
                        <div class="value">{{($any(key)?.expirationDate * 1000) | date: 'medium'  }}</div>
                    </div></mat-grid-tile>
                    <mat-grid-tile><div class="key-value-pair text-inside-grid">
                        <div class="key">Created:</div>
                        <div class="value">{{($any(key)?.createdDate * 1000) | date: 'medium'  }}</div>
                    </div></mat-grid-tile>
                </mat-grid-list>
            </mat-card-content>
        </mat-card>
        </ng-container>
    </mat-card-content>
    <mat-card-actions align="end" *ngIf="keys.length == 0" >
        <button mat-button (click)="onAddKey()">Create API Key</button>
    </mat-card-actions>
    </ng-container>
</mat-card>